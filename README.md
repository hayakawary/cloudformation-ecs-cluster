# redmineをECSクラスタで構築
※ローカルで使用していたredmineをECSで構築

①リポジトリ作成　　
cloudformationのスタック作成からテンプレートファイルのアップロードで以下のファイルをアップロードする。
ecr-repository.yml

パラメータ入力でリポジトリ名を入力
ローカルで使用していたredmineのdockerイメージをECRリポジトリにプッシュする。
※ECRリポジトリへのプッシュ方法はリポジトリのプッシュコマンドを表示を参照

②セキュリティグループを作成　　
cloudformationのスタック作成からテンプレートファイルのアップロードで以下のファイルをアップロードする。　　
ecs-ec2-securitygroup.yml　　

パラメータで以下を入力
ECSクラスター名
VPCの選択

③ECSクラスターを作成　　
cloudformationのスタック作成からテンプレートファイルのアップロードで以下のファイルをアップロードする。　　
ecs-cluster-ec2.yml　　

パラメータで以下を入力
ECSクラスター名
EC2インスタンスに設定するセキュリティグループを選択
AMI
インスタンスタイプ
インスタンスキーペア

④ECSサービス及びタスクを作成　　
cloudformationのスタック作成からテンプレートファイルのアップロードで以下のファイルをアップロードする。　　
ecs-service.yml　　

パラメータで以下を入力
ECSクラスター名
コンテナ名
コンテナ数
コンテナポート番号:3000
※redmineのデフォルトポート番号は3000
ホストポート番号:80
コンテナイメージ
※リポジトリにプッシュしたイメージURIをコピーして貼り付け
サービス名

⑤使用
ECSコンテナの外部リンクをクリック
